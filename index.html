<!DOCTYPE html>
<html lang="it">
<head>
    <meta name="google-site-verification" content="DLjKDn5UupGNdRgZXo9CuMc0Sg1S1aULxDJfIHT9tYo" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>Webcam Montefalcone in Diretta | Vista Panoramica e Meteo Live</title>
    
    <meta name="description" content="Guarda la webcam in diretta dal Comune di Montefalcone. Vista panoramica live, condizioni meteo attuali e immagini in tempo reale dal centro storico.">
    
    <meta name="keywords" content="webcam montefalcone, meteo montefalcone, comune di montefalcone live, telecamera diretta">
    
    <meta property="og:title" content="Webcam Montefalcone Live">
    <meta property="og:description" content="Guarda cosa succede ora a Montefalcone. Clicca per la diretta.">
    <meta property="og:image" content="https://www.webcammontefalconedivalfortore.it/p.png"> <meta name="robots" content="index, follow">
    
    <style>        
        html, body { 
            margin: 0; padding: 0; 
            height: 100%; width: 100%; 
            overflow: hidden; 
            background-color: #000; 
        }
        
        #main-container {
            width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            position: relative; z-index: 20;
        }

        /* --- SFONDO CON MOVIMENTO MONGOLFIERA MIGLIORATO --- */
        #bg-video-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            overflow: hidden; /* Fondamentale per nascondere i bordi */
            z-index: 0;
        }

        #bg-video {
            position: absolute;
            /* Centro iniziale */
            top: 50%; left: 50%;
            /* DIMENSIONE MAGGIORATA: Deve essere più grande dello schermo per muoversi */
            min-width: 115%; min-height: 115%;
            width: auto; height: auto;
            
            object-fit: cover; 
            filter: brightness(0.7) contrast(1.1);

            /* ANIMAZIONE MONGOLFIERA LENTISSIMA E FLUIDA */
            /* transform-origin: center center; */
            animation: balloonDrift 120s ease-in-out infinite alternate;
            will-change: transform; /* Ottimizza le prestazioni */
        }

        /* Definizione del percorso organico (parte dal centro -50%, -50%) */
        @keyframes balloonDrift {
            0% { 
                transform: translate(-50%, -50%) scale(1); 
            }
            25% { 
                /* Si sposta leggermente a destra e in alto, zoom minimo */
                transform: translate(-48%, -49%) scale(1.02); 
            }
            50% { 
                /* Si sposta in basso, zoom massimo */
                transform: translate(-50%, -52%) scale(1.04); 
            }
            75% { 
                /* Si sposta a sinistra, zoom medio */
                transform: translate(-52%, -50%) scale(1.03); 
            }
            100% { 
                /* Torna verso il centro ma leggermente spostato */
                transform: translate(-51%, -51%) scale(1.01); 
            }
        }

        /* --- VIGNETTATURA --- */
        .vignette {
            position: absolute; inset: 0;
            background: radial-gradient(circle at center, transparent 30%, rgba(0,0,0,0.5) 80%, black 100%);
            z-index: 10; pointer-events: none;
        }

        /* --- PLAYER VIDEO --- */
        .video-wrapper {
            position: relative; width: 80%; aspect-ratio: 16/9; 
            border-radius: 15px; overflow: hidden; background: #000;
            box-shadow: 0 0 40px rgba(255, 200, 100, 0.2), 0 30px 70px rgba(0,0,0,0.95);
            border: 1px solid rgba(255, 255, 255, 0.15); z-index: 30;
        }
        iframe { width: 100%; height: 100%; border: none; display: block; }
        .click-shield { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 30; cursor: default; }
        
        #custom-fs-btn {
            position: absolute; bottom: 15px; right: 15px; width: 50px; height: 50px;
            background-color: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%; color: #fff; font-size: 24px;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            z-index: 40; backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);
        }

        /* --- CANVAS NEVE --- */
        #snowCanvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 15;
        }
    </style>
</head>
<body>

    <div id="bg-video-container">
        <video autoplay muted loop playsinline id="bg-video" poster="1b.webp">
            <source src="sfondo_villaggio.mp4" type="video/mp4">
        </video>
    </div>
    
    <canvas id="snowCanvas"></canvas>
    
    <div class="vignette"></div>

    <div id="main-container">
        <div class="video-wrapper" id="videoWrapper">
            <iframe 
                src="https://www.youtube.com/embed/live_stream?channel=UCsjOOTpNAZZYxzkEj9gpNEw&autoplay=1&mute=1&controls=0&modestbranding=1&rel=0&playsinline=1" 
                title="Webcam" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                allowfullscreen>
            </iframe>
            <div class="click-shield"></div>
            <div id="custom-fs-btn" onclick="toggleFullScreen()">⛶</div>
        </div>
    </div>
    
    <script>
        // --- MOTORE NEVE JS (Vento realistico) ---
        (function() {
            var canvas = document.getElementById('snowCanvas');
            var ctx = canvas.getContext('2d');
            var width = window.innerWidth; var height = window.innerHeight;
            canvas.width = width; canvas.height = height;

            var isMobile = width < 768;
            var maxFlakes = isMobile ? 70 : 150; 
            var flakes = [];
            var currentWind = 0; var targetWind = 0; var windChangeTimer = 0;

            function addFlake() {
                var x = Math.random() * width; var y = Math.random() * height;
                var speed = Math.random() * 1 + 0.5; 
                var radius = Math.random() * 2 + 0.5; if(isMobile) radius += 0.5; 
                flakes.push({ x: x, y: y, r: radius, d: speed, a: Math.random() * Math.PI * 2, o: Math.random() * 0.5 + 0.3, weight: 1 - (radius / 4) });
            }
            for (var i = 0; i < maxFlakes; i++) { addFlake(); }

            function updateWind() {
                windChangeTimer++;
                if (windChangeTimer > 300) { windChangeTimer = 0; targetWind = (Math.random() - 0.5) * 3; }
                currentWind += (targetWind - currentWind) * 0.005;
            }

            function draw() {
                ctx.clearRect(0, 0, width, height); ctx.fillStyle = "rgba(255, 255, 255, 0.8)"; ctx.beginPath();
                for (var i = 0; i < maxFlakes; i++) {
                    var f = flakes[i]; ctx.moveTo(f.x, f.y); ctx.globalAlpha = f.o; ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2, true);
                }
                ctx.fill(); move();
            }

            var angle = 0;
            function move() {
                updateWind(); angle += 0.01;
                for (var i = 0; i < maxFlakes; i++) {
                    var f = flakes[i]; f.y += Math.pow(f.d, 2) + 0.5; f.x += currentWind * f.weight * 1.5; f.x += Math.sin(angle + f.d) * 0.2;
                    if (f.y > height) { flakes[i] = { x: Math.random() * width, y: -10, r: f.r, d: f.d, a: f.a, o: f.o, weight: f.weight }; }
                    if (f.x > width + 20) { f.x = -20; } else if (f.x < -20) { f.x = width + 20; }
                }
            }
            function loop() { draw(); requestAnimationFrame(loop); }
            loop();
            window.addEventListener('resize', function() { width = window.innerWidth; height = window.innerHeight; canvas.width = width; canvas.height = height; });
        })();

        // --- PLAYER LOGIC ---
        var videoWrapper = document.getElementById('videoWrapper');
        function toggleFullScreen() {
            if (!document.fullscreenElement && !document.webkitFullscreenElement) {
                if (videoWrapper.requestFullscreen) videoWrapper.requestFullscreen();
                else if (videoWrapper.webkitRequestFullscreen) videoWrapper.webkitRequestFullscreen();
            } else {
                if (document.exitFullscreen) document.exitFullscreen();
                else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
            }
        }
        function adjustLayout() {
            var ratio = window.innerWidth / window.innerHeight;
            if (ratio > 1.77) { videoWrapper.style.width = 'auto'; videoWrapper.style.height = '80%'; videoWrapper.style.aspectRatio = '16/9'; } 
            else { videoWrapper.style.width = '90%'; videoWrapper.style.height = 'auto'; videoWrapper.style.aspectRatio = '16/9'; }
        }
        window.addEventListener('resize', adjustLayout);
        adjustLayout();
    </script>
</body>
</html>


